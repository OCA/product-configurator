<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="config_header" name="Product Configuration Header">
        <div id="cfg_header" class="form-group text-right">
           <div class="col-xs-12">Image goes here</div>
        </div>
    </template>

    <!-- Base view for website configuration body -->
    <template id="product_configurator" name="Product Configuration Interface">
      <xpath expr="." position="inside">
        <t t-call="website.layout">
        <div itemscope="itemscope" itemtype="http://schema.org/Product" id="wrap">
          <div class="container">

            <t t-call="website_product_configurator.config_header"/>  

            <form id="product_config_form" class="form-horizontal" method="post" enctype="multipart/form-data">
              <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
              <!-- Render the tabs for configuration step lines -->
              <t t-call="website_product_configurator.config_steps"/>

              <!-- Render forms for each line -->
              <t t-call="website_product_configurator.config_form"/>

              <t t-call="website_product_configurator.config_footer"/>
            </form>
          </div>
        </div>
        </t>
      </xpath>
    </template>

    <template id="config_footer" name="Product Configuration Footer">
        <div id="cfg_footer" class="form-group text-right">
           <div class="col-xs-12">
              <button id="form_action"
                      type="submit"
                      class="btn btn-default pull-right mb32 btn-primary">
                    <span>Continue</span>
            </button>
            </div>
        </div>
    </template>    


    <!-- Base view for the form view of each configuration step -->
    <template id="config_form" name="Product Configuration Form">
      <div>
        <input name="product_tmpl_id" t-att-value="main_object.id" class="product_tmpl_id" type="hidden"/>
        <input name="config_session_id" t-att-value="cfg_session.id" class="config_session_id" type="hidden"/>
      </div>
      <div class="tab-content">
        <t t-foreach="cfg_step_lines" t-as="cfg_step_line">
            <!-- <t t-set="line_val_ids" t-value="line.attribute_line_ids.mapped('value_ids') | available_value_ids"/> -->
            <div t-attf-id="cfg_step_{{cfg_step_line.id}}" t-att-class="'tab-pane container fade' + (cfg_step_line.id == active_step.id and ' active in' or '')">
              <t t-call="{{cfg_step_line.get_website_template()}}"/>
            </div>
        </t>
      </div>
    </template>

    <!-- Base view for configuration steps -->
    <template id="config_steps" name="Product Configuration Steps">
      <div class="row">
        <div class="col-lg-12">
          <ul class="nav nav-tabs">
            <t t-foreach="cfg_step_lines" t-as="cfg_step_line">
              <li t-att-class="'nav-item' + (cfg_step_line.id == active_step.id and ' active' or '')">
                <a class="nav-link" data-toggle="tab" t-attf-href="#cfg_step_{{cfg_step_line.id}}" t-esc="cfg_step_line.config_step_id.name"/>
              </li>
            </t>
          </ul>
        </div>
      </div>
    </template>


<!-- Configuration forms -->
    
    <template id="config_form_base" name="Base Config Form View"/>

    <!-- Default configuration form (selectboxes ) -->
    <template id="config_form_select" name="Selectbox configuration form">
        <t t-foreach="cfg_step_line.attribute_line_ids" t-as="line">
            <select t-att-id="line.attribute_id.id"
                      t-att-data-oe-id="line.attribute_id.id"
                      t-att-multiple="'multiple' if line.multi else None"
                      t-att-name="line.attribute_id.id"
                      t-att-class="'form-control config_attribute'">
                      <!-- t-att-disabled="'disabled' if not available_val_ids and not line.custom else None" -->
                <option name=""/>
                <t t-foreach="line.value_ids" t-as="value">
                    <option
                        t-att-selected="'selected' if value.id in value_ids else None"
                        t-att-class="'disabled' if value.id not in available_value_ids else None"
                        t-att-value="value.id"
                        t-att-data-oe-id="value.id"
                        t-att-name="value.id">
                        <t t-esc="value.name"/>    
                    </option>
                  </t>
            </select>
        </t>
    </template>

</odoo>