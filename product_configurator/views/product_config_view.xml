<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>

    <!-- Configuration Steps -->

    <record id="config_step_form_view" model="ir.ui.view">
        <field name="name">product.configurator.config.step.form</field>
        <field name="model">product.config.step</field>
        <field name="arch" type="xml">
            <form string="Configuration Step">
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="config_step_tree_view" model="ir.ui.view">
        <field name="name">product.configurator.config.step.tree</field>
        <field name="model">product.config.step</field>
        <field name="arch" type="xml">
            <form string="Configuration Step">
                <tree name="name">
                    <field name="name"/>
                </tree>
            </form>
        </field>
    </record>

    <!-- Configuration Restrictions -->

    <record id="product_config_domain_form_view" model="ir.ui.view">
        <field name="name">product.configurator.domain.form</field>
        <field name="model">product.config.domain</field>
        <field name="arch" type="xml">
            <form string="Configuration Restrictions">
                <group>
                    <group>
                        <field name="name"/>
                    </group>
                </group>
                <notebook>
                    <page string="Rules">
                        <field name="domain_line_ids">
                            <tree editable="bottom">
                                <field name="sequence" widget="handle"/>
                                <field name="attribute_id"/>
                                <field name="condition"/>
                                <field
                                    name="value_ids"
                                    widget="many2many_tags"
                                    options="{'no_create': True, 'no_create_edit': True}"
                                    context="{'show_attribute': False}"
                                    domain="[('attribute_id', '=', attribute_id)]"/>
                                <field name="operator"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Inherited">
                        <field name="implied_ids"/>
                    </page>
                </notebook>
            </form>
        </field>
    </record>

    <record id="product_attribute_value_custom_form" model="ir.ui.view">
        <field name="name">product.attribute.value.custom.form</field>
        <field name="model">product.attribute.value.custom</field>
        <field name="arch" type="xml">
            <form string="Configuration Values">
                <group>
                    <group>
                        <field name="name"/>
                        <field name="attribute_id"/>
                    </group>
                    <group>
                        <field name="value" attrs="{'invisible': [('attachment_ids', '!=', [])]}"/>
                    </group>
                </group>
                <field name="attachment_ids" attrs="{'invisible': [('value', '!=', False)]}">
                    <tree>
                        <field name="datas_fname"/>
                        <field name="datas"/>
                    </tree>
                </field>
            </form>
        </field>
    </record>

    <record id="product_attribute_value_custom_tree" model="ir.ui.view">
        <field name="name">product.attribute.value.custom.tree</field>
        <field name="model">product.attribute.value.custom</field>
        <field name="arch" type="xml">
            <tree string="Configuration Values" editable="bottom">
                <field name="attribute_id" string="Attribute"/>
                <field name="value"/>
                <field name="attachment_ids" widget="many2many_tags"/>
            </tree>
        </field>
    </record>

    <record id="product_config_session_tree_view" model="ir.ui.view">
        <field name="name">product.config.session.tree</field>
        <field name="model">product.config.session</field>
        <field name="arch" type="xml">
            <tree string="Configuration Sessions" create="false">
                <field name="name"/>
                <field name="product_tmpl_id"/>
                <field name="value_ids" widget="many2many_tags"/>
                <field name="user_id"/>
                <field name="custom_value_ids"/>
                <field name="price"/>
                <field name="config_step_name"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="product_config_session_form_view" model="ir.ui.view">
        <field name="name">product.config.session.form</field>
        <field name="model">product.config.session</field>
        <field name="arch" type="xml">
            <form string="Configuration Sessions" editable="bottom" create="false">
                <header>
                    <field name="state" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <h1><field name="name" nolabel="1"/></h1>
                    </group>
                    <group>
                        <field name="product_tmpl_id"/>
                        <field name="user_id"/>
                        <field name="value_ids" widget="many2many_tags"/>
                        <field name="price"/>
                        <field name="config_step_name"/>
                    </group>
                    <notebook>
                        <page name="custom_vals" string="Custom Values">
                            <field name="custom_value_ids">
                                <tree string="Custom Values" editable="bottom">
                                    <field name="attribute_id"/>
                                    <field name="value"/>
                                    <field name="attachment_ids" widget="many2many_tags"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_attributes_view">
        <field name="name">Attributes</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.attribute</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem
        id="menu_attribute_action_configuration"
        action="action_attributes_view"
        parent="menu_product_configurable_settings"
        sequence="1"
        groups="product.group_product_variant"/>

    <menuitem
        id="menu_variants_action_configuration"
        action="product.variants_action"
        parent="menu_product_configurable_settings"
        sequence="2"
        groups="product.group_product_variant"/>
</data>
</odoo>
